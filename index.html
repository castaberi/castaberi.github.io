
<!DOCTYPE HTML>
<html lang="en-US">
<head>



<meta http-equiv="Content-Type" content="text/html, charset=UTF-8" />
	<title>NYC Restaurants</title>
	
	<!-- Meta -->
	<meta charset = "UTF-8" />
	
	<!-- Responsive stylesheet -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	
	<!-- IE stylesheet -->
	<!--[if lte IE 8]><link rel="stylesheet" type="text/css" href="http://407spxynzez3vk3mt1ov2n5i.wpengine.netdna-cdn.com/demo-clutterless/wp-content/themes/clutterless/styles/ie.css" /><![endif]-->
	
	<!-- RSS Feed -->
	<!-- <link rel="alternate" type="application/rss+xml" title="Clutterless Demo RSS Feed" href="http://hitdelete.com/demo-clutterless/feed/" /> -->
	
	<!-- Pingbacks -->
	<!--<link rel="pingback" href="http://hitdelete.com/demo-clutterless/xmlrpc.php" />-->
	


<link rel='stylesheet' id='clutterless-css'  href='http://407spxynzez3vk3mt1ov2n5i.wpengine.netdna-cdn.com/demo-clutterless/wp-content/themes/clutterless/style.css?ver=1.6' type='text/css' media='all' />
<link rel='stylesheet' id='google-webfonts-nc-css'  href='http://fonts.googleapis.com/css?family=News+Cycle%3A400&#038;ver=4.5.2' type='text/css' media='all' />
<link rel='stylesheet' id='google-webfonts-mw-css'  href='http://fonts.googleapis.com/css?family=Merriweather%3A700&#038;ver=4.5.2' type='text/css' media='all' />
<link rel='https://api.w.org/' href='http://hitdelete.com/demo-clutterless/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://hitdelete.com/demo-clutterless/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://hitdelete.com/demo-clutterless/wp-includes/wlwmanifest.xml" /> 


	<!-- Embedded WP Customizer Code Start-->
	<style>
		body
		{background: #F8F8F8;}
		#sidebar-name .sidebar-name-wrap,#sidebar-inner
		{background: #18BCEB !important;}
		#sidebar,#sidebar a,#sidebar-inner #search #search-form #search-field
		{color:#FFFFFF;}
		#content
		{color: ; text-shadow: 0 1px 0 #FFFFFF;}
		#content .post-title h2, #content .post-title h2 a
		{color: #333333;}
		#content  .post-content h2,#content  .post-content h3,#content  .post-content h4
		{color: #444444;}
		#content  .post-date, #content  .post-date a, #return a
		{color: #999999;}
		#content .post-content a
		{color: #444444;  border-bottom: 1px dotted #444444;}
		#content .post-content a:hover
		{color: #18BCEB;  border-bottom: 1px dotted #18BCEB;}
		html { min-width: 960px; }
						
		
		
		#boroughs {
		  stroke: grey;
			stroke-width: 2px;
			fill: steelblue;
		}

		.legend {
		  font-size: 10px;
		}

		.zipcode path{
		  stroke: #fff;
		  stroke-linejoin: round;
		  opacity: 1;
		}

		div.mouseover{
			position: absolute;
			background: black;
			background-color: rgba(0,0,0,0.5);
			border: 1px solid #131313;
			color: white;
			padding: 5px 8px;
			margin-left: 100px;
			margin-top: 50px;
			display: none;
		}


		#map-controls {
		  position: absolute;
		  width: 940px;
		  padding: 10px;
		  z-index: 1;
		  font-size: 14px;
		}


		#bar-controls {
		  position: absolute;
		  width: 940px;
		  padding: 10px;
		  z-index: 1;
		  font-size: 14px;
		}

						
		.bar {
			fill: steelblue;
			-moz-transition: all 0.3s;
			-o-transition: all 0.3s;
			-webkit-transition: all 0.3s;
			transition: all 0.3s;
		}

		.bar:hover {
			fill: brown;
		}

		.x.axis path {
		  display: none;
		}

		.axis path,
		.axis line {
		  font: 15px sans-serif;
		  fill: none;
		  stroke: #000;
		  shape-rendering: crispEdges;
		}	
		
		
		.dot {
		  stroke: #000;
		}
				
		
	</style>
</head>
	
	
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="colorbrewer.min.js"></script>
<script src="myfunctions.js"></script>
	
	
<body class="NYC Restaurants" id="ajax-on">  
<div class="mouseover"></div>


  <div id="ipad-click"><div id="content">	
         <div id="post">                       
            <div class="post" id="post-869" class="post-869 post type-post status-publish format-standard hentry category-blog">

  <div class="post-date">
    <a>17 May 2016</a>
  </div><!-- .post-date -->

  <div class="post-title">
    <h2>Predicting NYC Restaurant Inspection Scores</a></h2> 
  </div><!-- .post-title -->

  <div class="post-content">
      <p>New York City is home to more than 24,000 food establishments of various sorts. We will here simply refer all to such food establishments as “restaurants”. Each restaurant is occasionally inspected by the New York City Department of Health and Mental Hygiene (DOHMH) with the objective of ensuring food safety. After each inspection, a restaurant receives a score which is computed as a sum of violation points. The number of points a particular violation results in, depends on the severity of the violation. The final score is then converted into a grade of either “A”, “B” or “C”. Restaurants with a score of 13 or below receive an “A”, restaurants with a score between 14 and 27 receive a “B” and a score above 27 results in a “C”. For a more elaborate description of the inspection process and the types of violations, we refer to the <a href="http://www.nyc.gov/html/doh/downloads/pdf/rii/blue-book.pdf" target="_blank">DOHMH Blue Book</a>. </p>
<p>Our <strong>goal</strong> is to investigate if it is possible to tell something about the hygiene and food safety of a restaurant based only information that is readily available to a potential customer. This could be information such as the type of cuisine and location of the restaurant. We will focus on the inspection scores as a measure for the overall food safety and hygiene of a restaurant. </p>
<p>The analysis presented here is performed through plots but the results are based on various models fitted in Python. Our more model-based analysis in Python can be found in our <a href="http://nbviewer.jupyter.org/github/castaberi/castaberi.github.io/blob/master/Project%20Assignment%20B_Final_v2.ipynb" target="_blank">Python notebook</a>.</p>








<h3>The Data</h3>
<p>The data on the NYC restaurant inspections are available on <a href='https://data.cityofnewyork.us/Health/DOHMH-New-York-City-Restaurant-Inspection-Results/xx67-kt59' target="_blank">NYC Open Data</a>. In its entirety the data consist of about 560,000 records each corresponding to a single inspection. For each record there is information about the</p>
<ul>
<li>name and address of the restaurant</li>
<li>type of cuisine</li>
<li>date of inspection</li>
<li>type of violations</li>
<li>grade and score</li>
</ul>
<p>Since each restaurant may have been scored multiple times, we use the average score as a measure for a restaurant’s overall hygiene level. After some data cleansing we end up with a data set of 24,877 unique restaurants.</p>
<p>Besides the data from NYC Open Data, we will also collect user review data from <a href="http://www.yelp.com/nyc" target="_blank">Yelp</a> which is a website where people can review restaurants. Data are collected using the <a href="https://www.yelp.dk/developers/documentation/v2/search_api" target="_blank">Yelp Search Api</a>. Each restaurant receives a Yelp score between 1 and 5. We investigate whether it is of benefit to a potential costumer to know anything about this Yelp score in the search of a safe place to eat in NYC.</p>
<!--<p>The cleaned and concatenated datasets can be downloaded through (INSERT LINK TO DOWNLOAD OF FULL DATASET)</p>-->










<h3>Geographical Information</h3>
<p>The map of New York City visualises the distribution of the restaurants in NYC as well as the average scores. We see that Manhattan, the most densely populated borough of NYC, also has a relatively large number of restaurants.</p>

<p>Toggling to the average scores, we notice that the average score above 13 corresponding to the grade B. However, most restuarants do in fact currently have the grade A. This is caused by most restaurants earning the grade A only upon reinspection. It should be noted that because most restaurants have scores around 15-17 with some outliers, we have chosen to use score colour intervals for the choropleth such that the number of restaurants that fall within each interval is about equal. Toggling between the number of restaurants and average scores, it does appear that lowest performing regions, are those which lie in some distance around Manhattan.</p>

<p>Through our machine learning models, namely a Random Forrest Regressor, we find that the location do indeed have some predictive power. Especially the lattitude (from west to east) is important in predicting the average inspection score. That the location is important is in good alignment with what we see on the choropleth.</p>

<div id="map-controls">
  <input name="mode1" type="radio" value="N_REST" id="mode-map-nrest" class="map-nrest" checked><label for="mode-map-nrest"> Number of restaurants</label>
  <input name="mode1" type="radio" value="AVG_SCORE" id="mode-map-score" class="map-score"><label for="mode-map-score"> Average score</label>
</div>
<div id="chart" align="center"></div>
<script>
	makeMap("#chart");
</script>










<h3>Cuisine Types</h3>
<p>The data contain a total of 83 distinct cusine descriptions. We have grouped these into 13 categories to ease the analysis and get rid of very small groups. The distribution of cuisine types is shown in the bar chart below. The cuisine descriptions for each category can be seen by holding the curser over each bar. We see that the american cuisine is plentiful in NYC but foregin cuines such as Aisian and Latin are very popular too.</p>
<div id="bar-controls" class="test">
  <input name="mode" type="radio" value="N_REST" id="mode-nrest" class="bar-frequency" checked><label for="mode-nrest"> Frequency </label>
  <input name="mode" type="radio" value="AVG_SCORE" id="mode-score" class="bar-score"><label for="mode-score"> Average score</label>
</div>

<div id="map" align="center"></div>
<script>
	makeBarPlot("#map");
</script>

<p>Toggling to the average scores, we notice that all cuisine categories performing below the average of the categories are foreign cuisines. In particular, African restaurants perform the worst, possibly owing to the fact that hands are used a lot in preparing the food - something that might explain low scores for other cuines as well. As such, the type of cuisine may be an important factor in predicting the food safety of a restaurant.</p>

<p>The average inspection score is lowest in cafes. This is hardly surprising since cafes mainly deal with drinks (coffee and tea) much less than they deal with food as other restaurants. For similar reasons the category "Other" scores quite low. The majority of restaurants in this category also deal with low-risk food such as ice creams, juice and so on. Through our models we indeed find that if the potential customer knows that the restaurant lies within the category "Other" or "Cafe" she will be more successful in determining if the restaurant has a good inspection score. </p>










<h3>User Reviews</h3>
<p>As previously mentioned we have fetched user reviews on the restaurants from <a href="http://www.yelp.com/nyc" target="_blank">Yelp</a>. The intention is then to investigate if such user reviews can be used to say anything about the food safety of a restaurant in general. Yelp users can give a restaurant 1 to 5 stars and the overall Yelp review is taken as an average of the user reviews. We have only considered restaurants which have at least 5 reviews in order for the average review to be somewhat reliable. Unfortunately, only about 700 of the restaurants have been reviewed on Yelp and only about 600 of those have at least 5 reviews. Therefore a many restaurants have been left out of our analysis with Yelp scores.</p>



<p>From our analysis, and as can be seen from the scatterplot below, we find there is no immediate connection between a Yelp review and the inspection score that a restaurant receives.</p>

<b>Cuisine</b>:
<select id = "opts">
<option value="All">All</option>
<option value="African">African</option> 
<option value="American">American</option>
<option value="Asian">Asian</option>
<option value="Bakery">Bakery</option>
<option value="Cafe">Cafe</option>
<option value="Chinese">Chinese</option>
<option value="European">European</option>
<option value="Fast Food">Fast Food</option>
<option value="Italian">Italian</option>
<option value="Latin">Latin</option>
<option value="Mediterranean">Mediterranean</option>
<option value="Seafood">Seafood</option>
<option value="Other">Other</option>
</select> 
<div id="scatter" align="center"></div>
<script>
	makeScatter("#scatter");
</script>









<h3>Discussion</h3>
<p>In our analysis we have used the average DOHMH inspection scores as a measure for the hygiene of a restaurant.  However, it should be noted that <a href="http://www.businessinsider.com/whats-wrong-with-nyc-restaurant-ratings-2014-3?IR=T" target="_blank">criticism of the scoring system</a> can be drawn. Among the points raised are that scores are dependent on the individual inspector and that certain of the DHOMH rules are culturally biased. It should therefore be remembered that the inspection scores are by no means a perfect indicator of the food safety.</p>



<p>Overall we have found that potential customers do not have to worry about checking out the Yelp score before finding a safe place to eat. Notice that the actual reviews, i.e. the wording at Yelp, probably will contain some useful information for the potential customer, but the score itself does not. However, knowing where in NYC the restaurant is located and also whether the type of cuisine is categorised as "Other" or "Cafe" is helpful for the customer concerned about inspection scores.</p>

<p> A more comprehensive analysis with access to more features for each restaurant, e.g. do they serve alcohol, opening hours, size, price range etc., could have been conducted. If such analysis were to be carried out, we would probably be able to determine other important features that a potential customer should worry about. We have, however, not been able to obtain such information. But such information is probably not readily available for a new potential customer and it may as such not be of interest to our overall goal. </p>




  </div><!-- .post-content -->

  
</div><!-- /.post -->                                   
            <div class="navigation"></div><!-- AJAX navigation -->            
          </div><!-- #post -->
 </div></div><!-- #content #ipad-click --> 

 <div class="clear"></div>



</body>
</html>
